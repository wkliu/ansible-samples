from ucsmsdk.utils.ucsbackup import import_ucs_backup
from ucsmsdk.ucshandle import UcsHandle

backup_dir = "/home/cisco/backup_ucs"
backup_filename = "config_backup.xml"
servers = [
"10.10.85.101", "10.10.85.102", "10.10.85.103", "10.10.85.104", "10.10.85.105",
"10.10.85.106", "10.10.85.107", "10.10.85.108", "10.10.85.109", "10.10.85.110",
"10.10.85.111", "10.10.85.112", "10.10.85.113", "10.10.85.114", "10.10.85.115",
"10.10.85.116", "10.10.85.117", "10.10.85.118", "10.10.85.119", "10.10.85.120",
"10.10.85.121", "10.10.85.122", "10.10.85.123", "10.10.85.124", "10.10.85.125",
"10.10.85.126", "10.10.85.127", "10.10.85.128", "10.10.85.129", "10.10.85.130",
"10.10.86.101", "10.10.86.102", "10.10.86.103", "10.10.86.104", "10.10.86.105",
"10.10.86.106", "10.10.86.107", "10.10.86.108", "10.10.86.109", "10.10.86.110",
"10.10.86.111", "10.10.86.112", "10.10.86.113", "10.10.86.114", "10.10.86.115",
"10.10.86.116", "10.10.86.117", "10.10.86.118", "10.10.86.119", "10.10.86.120",
"10.10.86.121", "10.10.86.122", "10.10.86.123", "10.10.86.124", "10.10.86.125",
"10.10.86.126", "10.10.86.127", "10.10.86.128", "10.10.86.129", "10.10.86.130",
"10.10.86.131", "10.10.86.134", "10.10.86.137",
"10.10.86.141", "10.10.86.144", "10.10.86.147"
]
#servers = ["10.10.70.11", "10.10.70.12", "10.10.70.13"]
for server in servers:
   handle = UcsHandle(server, "admin", "cisco123")
   handle.login()
   print(server + ":")
   import_ucs_backup(handle, file_dir=backup_dir, file_name=backup_filename)
   handle.commit()
   handle.logout()
